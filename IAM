Topics
- IAM
- Roles
- Groups
- IAM policies 
- IAM MFA
- Access key, CLI, SDK
- AWS cloud shell 
- IAM roles for AWS services 
- IAM security tools 
- IAM best pracitces 

1. What is IAM?
IAM is a global service (it does not require region selection) that allows you to manage access to AWS services and resources securely. It handles Authentication (Who are you?) and Authorization (What are you allowed to do?).

2. Core Components

= Users
Represent a person or application within your AWS account.
New users have No Permissions by default.

= Groups
A collection of users.
Permissions granted to a group are automatically applied to all users in that group.
Note: Groups cannot be nested; a group cannot contain another group.

= Roles
An identity you can create that has specific permissions but is not uniquely associated with a single person.
Used by AWS Services (e.g., an EC2 instance) or Federated Users (e.g., logging in via Google/Active Directory).
Great for "delegating" access without sharing long-term credentials.

= IAM Policies
JSON documents that define permissions.
Structure:

Effect: Allow or Deny.
Action: List of API calls (e.g., s3:GetItem).
Resource: The specific AWS resources (ARN) the action applies to.
Condition: (Optional) Circumstances under which the policy is valid (e.g., IP range, MFA).

3. Security & Access

= Multi-Factor Authentication (MFA)
Mandatory Best Practice: Especially for the Root Account.
Options: Virtual MFA (Google Authenticator), U2F Security Key (YubiKey), or Hardware Key Fob.

= Accessing AWS

Management Console: Username + Password + MFA.
AWS CLI: Protected by Access Keys.
AWS SDK: Used in code, also protected by Access Keys.

‚ö†Ô∏è Security Warning: Never commit Access Keys to GitHub. Use IAM Roles for applications instead of hardcoding keys.

= AWS CloudShell
A browser-based shell that makes it easy to securely manage, explore, and interact with your AWS resources.
Pre-authenticated with your console credentials.
Available in specific regions (though IAM is global, CloudShell is regional).

4. Advanced Concepts

= IAM Roles for AWS Services
Instead of giving an EC2 instance an "Access Key," you assign it an IAM Role.
The instance "assumes" the role to get temporary security credentials. This is more secure and easier to manage.

= IAM Security Tools
IAM Credentials Report: A CSV file listing all users and the status of their credentials (passwords, MFA, access keys). Useful for auditing.
IAM Access Advisor: Shows which service permissions were actually used and when. Helps in following the Principle of Least Privilege.

5. IAM Best Practices (Exam Essentials)

- Don't use the Root Account for daily tasks.
- One Physical Person = One IAM User.
- Use Groups to assign permissions.
- Apply Least Privilege: Give only the minimum permissions required.
- Enable MFA for all users, especially Root and Admins.
- Use Roles for AWS Services (don't use access keys on EC2).
- Rotate Credentials (passwords and access keys) regularly.
- Use IAM Policy Simulator to test permissions before deploying.

6. Sample JSON Policy Structure

-----------------------------------------------------------
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:ListBucket",
      "Resource": "arn:aws:s3:::my-cool-bucket"
    },
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::my-cool-bucket/*"
    }
  ]
}
-----------------------------------------------------------

AWS IAM: Important Topics & Terms Summary

üîë Fundamental Concepts

Term	                           Definition                                                        	          Exam Significance

Authentication	                   Verifying who you are (Login/Password/MFA).	                                  Foundation of "Identity."
Authorization	                   Determining what you can do (Policies/Permissions).	                          Foundation of "Access."
Principle of Least Privilege	   Granting only the minimum permissions required to perform a task.	          Golden Rule for security questions.
Shared Responsibility Model	       AWS is responsible for "Security of the Cloud";                                Always remember: You manage IAM users/policies.
                                   You are responsible for "Security in the Cloud" (including IAM).  	       
____________________________________________________________________________________________________________________________________________________________________________

üõ°Ô∏è Policy Evaluation Logic
When a request is made, AWS evaluates policies in this strict order:
Explicit Deny: If any policy says "Deny," the request is stopped immediately. Deny always wins.
Explicit Allow: If there is an "Allow" and no "Deny," the request proceeds.
Implicit Deny (Default): If there is no "Allow" or "Deny," the request is blocked by default.

üìã Key IAM Entities
Root User: The account creator. Has full power. Best Practice: Lock it away, enable MFA, and never use it for daily tasks.
IAM User: A persistent identity (person or app). Has a password or access keys.
IAM Group: A collection of users. Use these to manage permissions at scale (e.g., an "Admins" group).
IAM Role: A temporary identity. Used for service-to-service communication (e.g., EC2 accessing S3) or Identity Federation (logging in via Google/Active Directory).

üõ†Ô∏è Policy Types
Managed Policies: Created and managed by AWS. They cover common job functions (e.g., AdministratorAccess).
Customer Managed Policies: Standalone policies you create in your account. Reusable and version-controlled.
Inline Policies: Embedded directly into a single user, group, or role. Avoid these unless absolutely necessary; they don't scale well.
Resource-Based Policies: Attached directly to a resource (like an S3 bucket or SQS queue) rather than an IAM identity.

üîç Security & Auditing Tools
IAM Credentials Report: A CSV file for the entire account listing all users and their credential status.
IAM Access Advisor: Analyzes individual users to see which services they actually use. Helps you trim unnecessary permissions.
IAM Access Analyzer: Identifies resources (like S3 buckets) that are shared with external accounts or the public.
AWS STS (Security Token Service): The service that issues temporary security credentials when a role is assumed.

üöÄ CLI & Automation
Access Keys: Consist of an Access Key ID and Secret Access Key. Used for programmatic access (CLI/SDK).
AWS CLI: A tool to manage AWS services via the command line. Requires local configuration (aws configure).
AWS CloudShell: A browser-based shell that is pre-authenticated. No need to manage access keys locally.
____________________________________________________________________________________________________________________________________________________________________________

üöÄ AWS IAM: Real-World Use Cases & Scenarios

1. Scenario: The EC2-to-S3 Bridge (IAM Roles)
The Problem: You have a Python application running on an EC2 instance that needs to upload log files to an S3 bucket.
Wrong Way: Hardcoding your personal Access Keys into the application code. If the instance is compromised, your keys are stolen.
AWS Way (Use Case): 1. Create an IAM Role (e.g., S3-Log-Uploader). 2. Attach a policy allowing s3:PutObject to that specific bucket. 3. Attach the role to the EC2 Instance Profile.
Result: The application uses temporary credentials that expire automatically. No keys are ever stored on the server.

2. Scenario: Multi-Account Management (Cross-Account Access)
The Problem: Your company has two AWS accounts: a Production Account and a Security/Audit Account. An auditor in the Security account needs to view the logs in the Production account.
Use Case: 1. In the Production Account, create an IAM Role named AuditorRole. 2. In the Trust Policy, allow the Security Account ID to assume this role. 3. The auditor logs into the Security Account and uses the "Switch Role" feature in the console.
Result: The auditor doesn't need a separate username/password for the Production account. Access is centralized and auditable.

3. Scenario: Enforcing Corporate Security (IAM MFA & Groups)
The Problem: A startup is hiring 10 new developers. They need to ensure no developer can delete database (RDS) instances and that all high-level actions require a hardware key.
Use Case: 1. Create an IAM Group called Developers. 2. Attach a policy that grants "PowerUser" access but adds an Explicit Deny for rds:DeleteDBInstance. 3. Add a Condition to the policy: "Bool": {"aws:MultiFactorAuthPresent": "true"}
Result: Even if a developer's password is leaked, the attacker cannot perform actions without the physical MFA device. If a developer leaves, you just remove them from the group.

4. Scenario: Corporate Login (Identity Federation)
The Problem: A large enterprise with 5,000 employees uses Microsoft Active Directory (AD). They don't want to create 5,000 manual IAM users.
Use Case: 1. Setup IAM Identity Center (successor to Single Sign-On). 2. Connect AWS to the corporate AD via SAML 2.0. 3. Map AD Groups (e.g., Marketing-Group) to AWS Roles (e.g., S3-Read-Only-Role).
Result: Employees log in using their Windows/Office 365 credentials. When they leave the company and are disabled in AD, their AWS access is automatically revoked.

5. Scenario: Analyzing Access (IAM Security Tools)
The Problem: Your "Admin" group has a policy that allows access to 50+ services, but you suspect they only use 5. You want to move toward Least Privilege.
Use Case: 1. Run the IAM Access Advisor for the group. 2. Identify services (like Redshift or DynamoDB) that show "Not accessed in the last 90 days." 3. Remove those permissions from the policy.
Result: You've significantly reduced the "attack surface" of your account by removing unused permissions.
____________________________________________________________________________________________________________________________________________________________________________
